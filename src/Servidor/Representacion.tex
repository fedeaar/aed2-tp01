\begin{Representacion}
  
    \Titulo{Representaci√≥n de servidor}
  
    Un servidor almacena y actualiza los diferentes SimCity. Se representa como un 
    diccionario implementado en un trie, donde las claves son los nombres de las partidas
    y los significados un puntero al SimCity, un diccionario de construcciones pendientes a agregar, y su estado (si es modificable o no).
  
    \begin{Estructura}{servidor}[diccTrie(Nombre, partida)]
        \begin{Tupla}[partida]
            \tupItem{modificable\ }{bool}
            \tupItem{\\sim\ }{puntero(SimCity)}
            \tupItem{\\pendientes\ }{dicc(Pos, Construccion)}
        \end{Tupla}

        \vspace{2mm}
        \begin{Tupla}[pos]
            \tupItem{x\ }{Nat}
            \tupItem{y\ }{Nat}
        \end{Tupla}

        \vspace{2mm}
        donde Nombre es string

        \vspace{2mm}
        donde Construccion es string

    \end{Estructura}
    
    \vspace{2mm}
    \Rep[estr]{ \\
            ($\forall\ partida_{1},\ partida_{2}$\ : Nombre) \\
                ((def?($partida_{1},\ e$) $\wedge$ def?($partida_{2},\ e$) $\wedge\ partida_{1} \neq partida_{2}$) \impluego \\
                \tab obtener($partida_{1},\ e$).sim $\neq$ obtener($partida_{2},\ e$).sim \\
            )\ $\wedge$ \\
            ($\forall\ partida$: Nombre)(def?($partida,\ e$) \impluego\ \\
                \tab $p$.sim $\neq$ NULL $\wedge$ \\
                \tab ($p$.modificable $\igobs$ \false\ \impluego\ $vacio?$(claves($p$.pendientes))) $\wedge$\\
                \tab ($\forall$ $pos$: Pos)(def?($pos$, $p$.pendientes) \impluego \\
                    \tab\tab (obtener($pos$, $p$.pendientes) $\in \{"casa",\ "comercio"\}\ \wedge\ $ \\
                    \tab\tab $\lnot$ def?($pos$, construcciones(*$p$.sim))) \\
                    %Se puede usar construcc aca?
                \tab ) \\
            )
      }

    \vspace{2mm}
    donde $p$ es obtener($partida,\ e$) \\

    \AbsFc[estr]{servidor}[e]{
        s: servidor | \\
            \tab ($\forall\ nombre$: Nombre)\\
                \tab\tab ($nombre$ $\in$ congelados($s$) $\Leftrightarrow$ \\
                \tab\tab (def?($nombre,\ e$) \yluego\ obtener($nombre,\ e$).modificable $\igobs$ \false)) \\
            \tab $\wedge$ \\
            \tab ($\forall\ nombre$: Nombre)\\
                \tab\tab (def?($nombre$, partidas($s$)) $\Leftrightarrow$ def?($nombre,\ e$)) \\
            \tab \yluego \\
            \tab ($\forall\ nombre$: Nombre)\\
                \tab\tab (def?($nombre$, partidas($s$)) \impluego \\ 
                \tab\tab (obtener($nombre$, partidas($s$)) $\igobs$ *(obtener($nombre,\ e$).sim) $\wedge$ \\
                \tab\tab pendientes($s,\ nombre$) $\igobs$ obtener($nombre,\ e$).pendientes)) \\
    }  

  \end{Representacion}
  
